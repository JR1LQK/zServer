Z-Server README.TXT

Z-ServerはzLog for Windows（以下zLog）を使ってマルチオ
ペでコンテストに参加する際、各バンド・各運用サイト間を
ネットワーク接続するためのサーバーソフトです。各バンド
・運用サイトに配置されたzLogはIP接続でZ-Serverに接続し
ます。Z-Serverでは各クライアントzLogの交信状況がすべて
把握できるほか、各バンドに必要な情報、例えば他バンドの
交信局数や交信済みマルチを提供する仲介役も果たします。

１．設定

始めにお使いのPCでTCP/IPプロトコルが設定されていること
をお確かめください。プロトコルが設定されていない場合は
コントロールパネルのネットワークでTCP/IPプロトコルを追
加してください。インターネットに接続している方はすでに
設定済みだと思います。

まずZ-Serverを起動します。単にZSERVER.EXEを起動するだ
けで特別な設定は要りません。

次にzLogを起動します。メニュー画面で各PCごとに違うTX#
（送信機番号）を入力してください。起動後、Windows|Options
｜Hardwareから「Z-Link」のPortとして「TELNET」をドロッ
プダウンメニューから選んでください。

さらに「TELNET Settings」と表示されたボタンをクリックし
出てきたウインドウ中のHost name欄にZ-Serverが動いている
ホスト名もしくはIPアドレスを入力してOKボタンをクリック
してください。Z-ServerとzLogが同じマシンで動いている場
合は「localhost」で良いはずです。

OptionsウインドウのOKボタンもしくはSaveボタンをクリック
して設定を有効にします。

メインウインドウのバンドが運用するバンドになっていること
を確認します。

メインメニューからNetwork｜Connect to Z-Serverを選んで
Z-Serverに接続します。接続直後にログの内容をダウンロー
ドもしくはマージするか聞いてきます。

これでzLog−Z-Server接続は完了です。

２．機能

Z-Serverには起動時に表示されるメインウインドウ、zLogが接
続される毎に生成されるクライアントウインドウ、スコアウイ
ンドウ、マルチウインドウの４つの主要なウインドウがありま
す。

メインウインドウは受信データのモニタ、チャット画面、接続
中のすべてのzLogにメッセージを送信するための行エディタな
どがあります。

メインウインドウ上部のMonitor chat onlyチェックボックスは
普段はチェックしておくことをお勧めします。再接続時など、
大量のデータを送受する際に動作の高速化につながります。

クライアントウインドウもメインウインドウと同様で、行エデ
ィタの内容はそのクライアントに対してのみ送信されます。

Windowsメニューから表示できるスコアおよびマルチウインドウ
では各バンドの情報がリアルタイムに観察できます。

３．zLog/Z-Serverの仕組み

Z-Serverに接続されたPC間ではログが擬似的に共有されます。
つまり1台のPCで入力された内容は即座にネットワークに接続さ
れている他のPC上のzLogの画面に追加されます。すべてのPCで
すべてのQSOを編集、削除、追加などの操作を行うことが可能で
す。（あるPCで編集中のQSOは他のPCではロックされます）

●データの一貫性について

ネットワークに接続されている限り、データはまず完全に同期
できていると考えて間違いありません。データの一貫性の問題
が生じるのは何らかの原因でネットワークが一時的に途切れ、
再接続する際が考えられます。再接続時にはzLogから以下の２
つの方法で、データを再度同期させることができます。

   Download log from Z-Server (Erase local log)
     いったんローカルのログを削除して、Z-Server上に蓄積さ
     れているファイルをダウンロードします。ネットワーク切
     断中に新たなデータがローカルデータに追加されていない
     場合、これを選択したほうが確実に他のクライアントとデ
     ータを同期できます。
     ネットワーク接続中にデータの追加や変更があった場合、
     双方のログをオンラインでマージさせることによりデータ
     を同期させることができます。このオプションでもほぼ完
     璧にデータの同期を取ることができます。ただし切断中に
     データの削除が行われた場合、マージによってそのデータ
     が復活してしまうことがあります。

マージによるデータ再同期方法は、常時接続できない２つ以上の
運用サイト間で定期的にデータの交換を行うときにも便利です。

●対応コンテストについて

Ver1.6現在Z-Serverが対応しているコンテストはJARL4大コンテ
スト（ALLJA、6m&Down、フィールドデー、全市全郡）およびCQ
WWコンテストの５つです。その他のコンテストではZ-Server上
での正しいスコア、マルチ表示が犠牲になることを除けば、適
当なコンテストモードで強制的に使用することは可能です。
Z-Serverが対応しないコンテストでネットワークを構築しても
zLogクライアント側の得点計算、マルチ処理には一切影響はあ
りません。

●Z-Serverを立ちあげるPCについて

Z-ServerはzLogと共存できますので、最低、運用サイト分の数
のPCがあればネットワークを構築できます。ただしネットワー
クの安定性の理由からZ-Serverは独立したPCで動かすことをお
勧めします。

History

ver 1.3  4/21/02  ネットワーク不具合によりデュープデータが大量発生した際、File
　　　　　　　　　Delete Dupesで一括削除できるようにした。クライアントは自動的
　　　　　　　　　に更新されないので必要に応じて各クライアントがデータを
                  Downloadする必要あり。

　　　　　　　　　コンパイラをDelphi6に変更。　

ver 1.2f 8/27/01  Z-Server送信のチャットメッセージに時間が付加されるように修
                  正。

                  グラフウインドウを追加。まだ試作段階で多数バグあり。

ver 1.2e 6/04/00  チャットの時刻表示形式を変更。

ver 1.2d 4/16/00  リグ周波数リストをZ-Serverから見ることができるようにした。
                  Windows | Current Frequencies

ver 1.2c 10/23/99 クライアント接続が切れた場合、接続中の全クライアントにどの
                  バンドの接続が切れたかをメッセージ配信する際、赤で表示され
                  るよう、！を一文字目に加えるようにした。

ver 1.2b 10/22/99 クライアント接続が切れた場合、接続中の全クライアントにどの
                  バンドの接続が切れたかをメッセージ配信するようにした。

ver 1.2a 10/17/99 ALL JA以外のコンテストでスコアウインドウが更新されないバグ
                  を修正した。

ver 1.2  10/16/99 透過・非透過モードの区別の廃止。（zLogはver 1.6以上が必要）

                    【透過・非透過モードの統合】
                    
                    透過・非透過モードの区別は廃止しました。Z-Serverに接続した
                    すべてのzLogクライアントはその他のクライアントの情報を共有
                    し、修正、削除も可能になります。クライアント接続数の制限は
                    ありませんし、バンドのクロスオーバーも可能です。M/S、2TX、
                    M/Mもすべておなじネットワーク設定で利用できます。
                    
                    【再接続時の動作（zLog側）】
                    
                    再接続時のデータの更新方法は２つあります。これらは接続時
                    に表示されるチェックボックスおよびメインメニューNetworkか
                    ら選択できます。

                       Download log from Z-Server (Erase local log)
                         いったんローカルのログを削除して、Z-Server上に蓄積さ
                         れているファイルをダウンロードします。ネットワーク切
                         断中に新たなデータがローカルデータに追加されていない
                         場合、これを選択したほうが確実に他のクライアントとデ
                         ータを同期できます。
 
                       Merge log with Z-Server
                         ネットワーク接続中にデータの追加や変更があった場合、
                         双方のログをオンラインでマージさせることによりデータ
                         を同期させることができます。このオプションでもほぼ完
                         璧にデータの同期を取ることができます。ただし切断中に
                         データの削除が行われた場合、マージによってそのデータ
                         が復活してしまうことがあります。

                  一時的処置としてファイルマージ機能を使えないようにした。

ver 1.0b  8/1/99  チャットの内容をログに取れるようにした。File|Start Logを選
                  択するとログを取り始める。ログはLOG.TXTというファイルに自動
                  的に追加される。ログを止めたいときはFile|Stop Logを選択。

                  スコアウインドウが更新されないバグ修正。

ver 1.0a  4/12/99 コンソールウインドウが自動的にスクロールするようにした。

                  非透過モードで同バンドに2つのクライアントが接続した場合に
                  最後にバンドを変更したクライアントを強制ディスコネクトして
                  いたが、「Band already in use!」という警告メッセージを表示
                  するだけにした。同じバンドでの複数のクライアント接続は非透
                  過モードでは対応していないので注意してください。

                  Winsocket関連コンポーネントのアップデート。

ver 1.0   8/21/98 正式リリース(ハムフェア98)

                  CQWWモード追加。CQWW.DATもしくはCTY.DATは各クライアント
                  と共通のものを使用してください。

ver 0.32  7/19/98 Connectionsウインドウを新設。現在接続中のバンド・オペレー
                  タを表示。

                  ファイルのオープンおよびマージができるようにした。
                    Open File
                      現在Z-Serverに記録されている全データをクリアし、ZLO
                      ファイルから新しいデータを読み込む。あまり使用する機
                      会はないはず。万が一Z-Serverが落ちた場合はZ-Server
                      が保存していたZLOファイルを読み込むよりも各zLogに再
                      接続させて、最新のデータをアップロードさせるべきであ
                      る。
                    Merge File
                      ファイルを指定すると、どのバンドをアップデートするか
                      を指定するウインドウが表示される。アップデートしたい
                      バンドをチェックし、OKボタンを押すと、チェックしたバ
                      ンドのデータのみクリアし、ZLOファイルから該当するバン
                      ドのデータのみ読み込む。

                      マージ機能は複数の運用サイトで運用し、各サイト内でロ
                      ーカルにZ-Serverを動かし、定期的にディスクでデータを
                      サイト間で交換するという使い方を想定しています。こう
                      すればすべてのバンドを同時にIP接続できなくてもある程
                      度新鮮な情報を共有できるというメリットがあります。

                    ファイルのオープンもしくはマージを行った場合、Z-Server
                    からは各zLogにファイルのアップデートが行われたという通
                    知が行われ、それを受けてzLogではデータのダウンロードを
                    行うかどうかユーザーに問い合わせるウインドウが開きます。
                    これは大量のデータを読み込むと数秒から数十秒zLogがフリ
                    ーズする可能性があるため、忙しい場合はあとで手動でダウ
                    ンロードできる選択を用意するためです。（zLogはver 0.42
                    以降が必要）

ver 0.31  7/15/98 同じバンドでの接続を複数接続できないようにした。

                  zLog側から\WHOコマンドで現在接続中のバンド・オペレータが
                  見られるようにした。

ver 0.30  6/29/98 JARL4大コンテストに対応。

ver 0.22   2/7/98 ZLOG.EXEのZLOファイル形式変更に伴う再コンパイル。

ver 0.21 12/28/97 得点情報更新のバグを修正。

ver 0.20 12/24/97 通信上のバグのためほぼ最初からコーディングし直した。
                  
                  対応コンテストはALL JAのみ。
                  
                  QSOの挿入にも対応。
                  

ver 0.10 12/07/97 最初のβバージョン。
                 
                  機能はスコアおよびマルチ情報のモニタのみ。QSOの追加、削除、
                  変更には対処しているが挿入にはまだ対応していない。

                  ALL JAのみに対応。
